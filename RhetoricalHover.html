<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rhetorical Appeals Highlighter (Hover Version)</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
        line-height: 1.6;
    }
    .toolbar {
        margin-bottom: 15px;
    }
    button {
        padding: 8px 14px;
        margin: 4px;
        border: none;
        cursor: pointer;
        border-radius: 4px;
        font-weight: bold;
    }

    /* Colors */
    .Logos { background-color: #a3d5ff; }
    .Pathos { background-color: #ffb3c6; }
    .Ethos { background-color: #c3f7c3; }
    .Kairos { background-color: #ffe7a1; }

    .eraser { background-color: #e0e0e0; }
    .undo { background-color: #d4c4ff; }
    .reset { background-color: #ffcccc; }
    .save { background-color: #c2ffd2; }

    #textBox {
        border: 1px solid #ccc;
        padding: 15px;
        min-height: 200px;
        white-space: pre-wrap;
    }

    mark {
        padding: 2px;
        border-radius: 3px;
    }
</style>
</head>

<body>

<h2>Rhetorical Appeals Highlighter (Hover Version)</h2>

<div class="toolbar">
    <button class="Logos" title="Logos: logical appeal using facts, reasoning, or evidence" onclick="setMode('Logos')">Logos</button>
    <button class="Pathos" title="Pathos: emotional appeal that evokes feelings" onclick="setMode('Pathos')">Pathos</button>
    <button class="Ethos" title="Ethos: ethical appeal based on credibility or character" onclick="setMode('Ethos')">Ethos</button>
    <button class="Kairos" title="Kairos: appeal to timeliness or the opportune moment" onclick="setMode('Kairos')">Kairos</button>

    <button class="eraser" title="Remove highlighting" onclick="setMode('erase')">Eraser</button>
    <button class="undo" onclick="undo()">Undo</button>
    <button class="reset" onclick="resetHighlights()">Reset</button>
    <button class="save" onclick="saveWork()">Save</button>
</div>

<div id="textBox" contenteditable="true">
<p>In the same winter the Athenians, following their annual custom, gave a public funeral for those who had been the first to die in the war. These funerals are held in the following way: two days before the ceremony the bones of the fallen are brought and put in a tent which has been erected, and people make whatever offerings they wish to their own dead. Then there is a funeral procession in which coffins of cypress wood are carried on wagons. There is one coffin for each tribe, which contains the bones of members of that tribe. One empty bier is decorated and carried in the procession: this is for the missing, whose bodies could not be recovered. Everyone who wishes to, both citizens and foreigners, can join in the procession, and the women who are related to the dead are there to make their laments at the tomb. The bones are laid in the public burial-place, which is in the most beautiful quarter outside the city walls. Here the Athenians always bury those who have fallen in war. The only exception is those who died at Marathon, who, because their achievement was considered absolutely outstanding, were buried on the battlefield itself.</p>
<hr>
<p>Fifty-one thousand human beings were killed or wounded here, ancestors of some of us, brothers of us all. This was the first full-fledged example of an industrialized war, with machine-made arms and railroad transport of men and materiel. This was the first hint of an age yet to come, our age; an intimation of what technology bent to the purposes of war might be capable. The new Spencer repeating rifle was used here. In May 1863, a reconnaissance balloon of the Army of the Potomac detected movement of Confederate troops across the Rappahannock River, the beginning of the campaign that led to the Battle of Gettysburg. That balloon was a precursor of air forces and strategic bombing and reconnaissance satellites.</p>
<p>A few hundred artillery pieces were deployed in the three-day battle of Gettysburg. What could they do? What was the war like then? . . . Ballistic projectiles, launched from the cannons that you can see all over this Gettysburg Memorial, had a range, at best, of a few miles. The amount of explosive in the most formidable of them was some twenty pounds, roughly one-hundredth of a ton of TNT.  It was enough to kill a few people.</p>
    
</div>

<script>
let mode = null;
let historyStack = [];

function saveState() {
    historyStack.push(document.getElementById("textBox").innerHTML);
}

function setMode(newMode) {
    mode = newMode;
}

document.getElementById("textBox").addEventListener("mouseup", function () {
    let selection = window.getSelection();
    if (selection.toString().length === 0 || !mode) return;

    saveState();

    let range = selection.getRangeAt(0);

    if (mode === "erase") {
        // Remove any <mark> tags inside the selection
        let contents = range.extractContents();
        let walker = document.createTreeWalker(contents, NodeFilter.SHOW_ELEMENT);

        let node;
        while (node = walker.nextNode()) {
            if (node.tagName === "MARK") {
                let parent = node.parentNode;
                while (node.firstChild) {
                    parent.insertBefore(node.firstChild, node);
                }
                parent.removeChild(node);
            }
        }

        range.insertNode(contents);
        selection.removeAllRanges();
        return;
    }

    // Normal highlighting
    let span = document.createElement("mark");
    span.className = mode;
    span.appendChild(range.extractContents());
    range.insertNode(span);

    selection.removeAllRanges();
});

function undo() {
    if (historyStack.length > 0) {
        document.getElementById("textBox").innerHTML = historyStack.pop();
    }
}

function resetHighlights() {
    saveState();
    let box = document.getElementById("textBox");
    box.innerHTML = box.innerText;
}

function saveWork() {
    let content = document.getElementById("textBox").innerHTML;
    let blob = new Blob([content], { type: "text/html" });
    let url = URL.createObjectURL(blob);

    let a = document.createElement("a");
    a.href = url;
    a.download = "rhetorical_highlights.html";
    a.click();

    URL.revokeObjectURL(url);
}
</script>

</body>

</html>


