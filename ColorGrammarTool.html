<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Color Grammar Highlighter (10 Labels)</title>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 40px;
        max-width: 800px;
        line-height: 1.6;
    }

    #editor {
        width: 100%;
        min-height: 200px;
        border: 1px solid #ccc;
        padding: 12px;
        border-radius: 6px;
        outline: none;
    }

    .color-btn {
        padding: 8px 14px;
        margin: 6px 8px 6px 0;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        color: white;
        font-weight: bold;
    }

    .red { background-color: #e74c3c; }
    .blue { background-color: #3498db; }
    .green { background-color: #2ecc71; }
    .yellow { background-color: #f1c40f; color: black; }
    .purple { background-color: #9b59b6; }
    .orange { background-color: #e67e22; }
    .teal { background-color: #1abc9c; }

    .eraser { background-color: #555; }
    .undo { background-color: #333; }
    .reset { background-color: #8e44ad; }
    .save { background-color: #16a085; }

    .color-btn[data-color="#c4b5fd"] { background-color: #c4b5fd; }
    .color-btn[data-color="#f9a8d4"] { background-color: #f9a8d4; }
    .color-btn[data-color="#fdba74"] { background-color: #fdba74; }
</style>

</head>
<body>

<h1>Color Grammar Highlighter</h1>
<p>Use this tool to practice finding sentence boundaries: commas, dashes, colons, periods, parentheses, etc. Highlight text, then click a label to apply its color. Ensure that any boundaries belonging to a particular phrase stay within their own highlighted area. No punctuation should be left un-highlighted. Use Eraser, Undo, Reset, or Save as needed. Unfortunately, the eraser only works if used immediately after highlighting. This is a work in progress...</p>

<div>
    <button class="color-btn red" onclick="applyColor('#e74c3c')">Independent</button>
    <button class="color-btn blue" onclick="applyColor('#3498db')">Dep-PrepPhrase</button>
    <button class="color-btn green" onclick="applyColor('#2ecc71')">Dep-SubordConj</button>
    <button class="color-btn yellow" onclick="applyColor('#f1c40f')">Dash Sandwich</button>
    <button class="color-btn purple" onclick="applyColor('#9b59b6')">Comma Sandwich</button>
    <button class="color-btn" data-color="#fdba74" title="Marks a Subject, dependent clause, Verb Object pattern">S, d, VO</button>

    <button class="color-btn orange" onclick="applyColor('#e67e22')">Dep-Gerund</button>
    <button class="color-btn" data-color="#c4b5fd" title="Marks a dependent clause beginning with 'that'">that DepClause</button>
    <button class="color-btn" data-color="#f9a8d4" title="Marks a dependent clause that begins with 'when' or 'whenever'">when(ever) DepClause</button>

    <button class="color-btn teal" onclick="applyColor('#1abc9c')">Dep-Other</button>
    
    <button class="color-btn eraser" onclick="eraseFormatting()">Eraser</button>
    <button class="color-btn undo" onclick="undoAction()">Undo</button>
    <button class="color-btn reset" onclick="resetText()">Reset</button>
    <button class="color-btn save" onclick="saveHighlights()">Save</button>
    
</div>

<br>

<div id="editor" contenteditable="true">
    <p>There was something mysterious in the air that morning. Nothing was done in its regular order, and several of the native servants seemed missing, while those whom Mary saw slunk or hurried about with ashy and scared faces. But no one would tell her anything, and her Ayah did not come. She was actually left alone as the morning went on, and at last she wandered out into the garden and began to play by herself under a tree near the veranda. She pretended that she was making a flowerbed, and she stuck big scarlet hibiscus blossoms into little heaps of earth, all the time growing more and more angry and muttering to herself the things she would say and the names she would call Saidie when she returned.
</p>
    <p>One evening in late January, Peter Dut, 21, leads his two teenage brothers through the brightly lit corridors of the Minneapolis airport, trying to mask his confusion. Two days earlier, the brothers, refugees from Africa, had encountered their first light switch and their first set of stairs. An aid worker in Nairobi1 had demonstrated the flush toilet to them—also the seat belt, the shoelace, the fork. And now they find themselves alone in Minneapolis, three bone-thin African boys confronted by a swirling river of white faces and rolling suitcases.
</p>
    <p>No doubt you think, gentlemen, that I have been condemned for lack of the arguments which I could have used if I had thought it right to
leave nothing unsaid or undone to secure my acquittal. But that is very far from the truth. It is not a lack of arguments that has caused my condemnation, but a lack of effrontery and impudence, and the fact that I have refused to address you in the way which would give you
most pleasure. You would have liked to hear me weep and wail, doing and saying all sorts of things which I regard as unworthy of myself, but which you are used to hearing from other people. But I did not think then that I ought to stoop to servility because I was in danger, and I do not regret now the way in which I pleaded my case. I would much rather die as the result of this defense than live as the result of the other sort. In a court of law, just as in warfare, neither I nor any other ought to use his wits to escape death by any means. In battle it is often obvious that you could escape being killed by giving up your arms and throwing yourself upon the mercy of your pursuers, and in every kind of danger there are plenty of devices for avoiding death if you are unscrupulous enough to stick at nothing. But I suggest, gentlemen, that the difficulty is not so much to escape death; the real difficulty is to escape from doing wrong, which is far more fleet of foot. In this present instance I, the slow old man, have been overtaken by the slower of the two, but my accusers, who are clever and quick, have been overtaken by the faster—by iniquity. When I leave this court I shall go away condemned by you to death, but they will go away convicted by truth herself of depravity and wickedness. And they accept their sentence even as I accept mine. No doubt it was bound to be so, and I think that the result is fair enough.
</p>
    <p>Every night for three nights I sat in the row of candidates on the platform and held the magic disk in the palm of my hand and gazed at it and tried to get sleepy, but it was a failure; I remained wide awake and had to retire defeated, like the majority. Also, I had to sit there and be gnawed with envy of Hicks, our journeyman; I had to sit there and see him scamper and jump when Simmons the enchanter exclaimed, “See the snake! See the snake!” and hear him say, “My, how beautiful!” in response to the suggestion that he was observing a splendid sunset; and so on—the whole insane business. I couldn’t laugh, I couldn’t applaud; it filled me with bitterness to have others do it and to have people make a hero of Hicks and crowd around him when the show was over and ask him for more and more particulars of the wonders he had seen in his visions and manifest in many ways that they were proud to be acquainted with him. I couldn’t stand it; I was getting boiled to death in my own bile.</p>
    <p>Being thus passed the vast ocean, and a sea of troubles before in their preparation (as may be remembered by that which went before), they had now no friends to welcome them nor inns to entertain or refresh their weather-beaten bodies; no houses or much less towns to repair to, to seek for succor. It is recorded in Scripture as a mercy to the Apostle and his shipwrecked company, that the barbarians showed them no small kindness in refreshing them, but these savage barbarians, when they met with them (as after will appear) were readier to fill their sides full of arrows than otherwise. And for the season it was winter, and they that know the winters of that country know them to be sharp and violent, and subject to cruel and fierce storms, dangerous to travel to known places, much more to search an unknown coast. Besides, what could they see but a hideous and desolate wilderness, full of wild beasts and wild men—and what multitudes there might be of them they knew not. Neither could they, as it were, go up to the top of Pisgah4 to view from this wilderness a more goodly country to feed their hopes; for which way soever they turned their eyes (save upward to the heavens) they could have little solace or content in respect of any outward objects. For summer being done, all things stand upon them with a weather-beaten face, and the whole country, full of woods and thickets, represented a wild and savage hue. If they looked behind them, there was the mighty ocean which they had passed and was now as a main bar and gulf to separate them from all the civil parts of the world.</p>
</div>

<script>
let historyStack = [];
let originalText = "";

window.onload = function() {
    const editor = document.getElementById("editor");
    originalText = editor.innerHTML;
};

function saveState() {
    const editor = document.getElementById("editor");
    historyStack.push(editor.innerHTML);
}

function applyColor(color) {
    let selection = window.getSelection();
    if (!selection.rangeCount) return;

    saveState();

    let range = selection.getRangeAt(0);
    let span = document.createElement("span");
    span.style.backgroundColor = color;

    range.surroundContents(span);
}

function eraseFormatting() {
    let selection = window.getSelection();
    if (!selection.rangeCount) return;

    saveState();

    let range = selection.getRangeAt(0);
    let contents = range.extractContents();

    // Remove ALL span wrappers inside the selection
    contents.querySelectorAll("span").forEach(span => {
        while (span.firstChild) {
            span.parentNode.insertBefore(span.firstChild, span);
        }
        span.remove();
    });

    range.insertNode(contents);
}

function undoAction() {
    if (historyStack.length === 0) return;
    const editor = document.getElementById("editor");
    editor.innerHTML = historyStack.pop();
}

function resetText() {
    saveState();
    document.getElementById("editor").innerHTML = originalText;
}

function saveHighlights() {
    const editor = document.getElementById("editor").innerHTML;

    const blob = new Blob(
        [`<html><body>${editor}</body></html>`],
        { type: "text/html" }
    );

    const url = URL.createObjectURL(blob);
    const link = document.createElement("a");
    link.href = url;
    link.download = "highlights.html";
    link.click();
    URL.revokeObjectURL(url);
}
document.querySelectorAll(".color-btn[data-color]").forEach(btn => {
    btn.addEventListener("click", () => {
        let color = btn.getAttribute("data-color");
        applyColor(color);
    });
});
</script>

</body>

</html>





